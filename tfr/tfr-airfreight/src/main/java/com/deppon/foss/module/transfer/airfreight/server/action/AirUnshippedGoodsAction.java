/**
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  initial comments.
 */
/*******************************************************************************
 * Copyright 2013 TFR TEAM
 *  
 *  Licensed under the DEPPON License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  
 *     http://www.deppon.com/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *  Contributors:
 *  038300-foss-pengzhen - initial API and implementation
 * 
 *  PROJECT NAME  : tfr-airfreight
 *  
 * package_name  : 
 *  
 *  FILE PATH          :/AirUnshippedGoodsAction.java
 * 
 *  FILE NAME          :AirUnshippedGoodsAction.java
 *  
 *  AUTHOR  : FOSS中转系统开发组
 *  
 *  TIME              : 
 *  
 *  HOME PAGE    :  http://www.deppon.com
 *  
 *  COPYRIGHT    : Copyright (c) 2013  Deppon All Rights Reserved.
 ******************************************************************************/
package com.deppon.foss.module.transfer.airfreight.server.action;

import java.util.List;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.deppon.foss.framework.exception.BusinessException;
import com.deppon.foss.framework.server.web.action.AbstractAction;
import com.deppon.foss.framework.server.web.result.json.annotation.JSON;
import com.deppon.foss.module.transfer.airfreight.api.server.service.IAirUnshippedGoodsService;
import com.deppon.foss.module.transfer.airfreight.api.shared.domain.AirUnshippedGoodsEntity;
import com.deppon.foss.module.transfer.airfreight.api.shared.domain.AirWaybillSerialNoEntity;
import com.deppon.foss.module.transfer.airfreight.api.shared.vo.AirUnshippedGoodsVO;

/**
 * 拉货相关操作
 * @author foss-liuxue(for IBM)
 * @date 2012-11-29 下午8:44:04
 */
public class AirUnshippedGoodsAction extends AbstractAction {

	private static final long serialVersionUID = 114913496835242027L;
	//日志
	private static final Logger LOGGER = LoggerFactory.getLogger(AirUnshippedGoodsAction.class);
    //拉货service
	private IAirUnshippedGoodsService airUnshippedGoodsService;
	//拉货vo
	private AirUnshippedGoodsVO airUnshippedGoodsVO = new AirUnshippedGoodsVO();

	public void setAirUnshippedGoodsService(
			//设置拉货服务
			//定义service
			IAirUnshippedGoodsService airUnshippedGoodsService) {
		//设置
		this.airUnshippedGoodsService = airUnshippedGoodsService;
	}

	public AirUnshippedGoodsVO getAirUnshippedGoodsVO() {
		//返回拉货vo
		return airUnshippedGoodsVO;
	}

	public void setAirUnshippedGoodsVO(AirUnshippedGoodsVO airUnshippedGoodsVO) {
		//设置拉货vo
		//设置值
		this.airUnshippedGoodsVO = airUnshippedGoodsVO;
	}
	
	/**
	 * 查询拉货信息
	 * @author LiuXue
	 * @date 2012-11-29 下午8:42:51
	 */
	@JSON
	public String queryUnshippedGoods(){
		//异常处理
		try{
			//拉货实体list
			List<AirUnshippedGoodsEntity> airUnshippedGoodsList = airUnshippedGoodsService.queryUnshippedGoods(airUnshippedGoodsVO.getAirUnshippedGoodsDto(), this.start, this.limit);
			//总件数
			Long totalCount = airUnshippedGoodsService.getCount(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//设置总件数
			this.setTotalCount(totalCount);
			//设置拉货vo
			airUnshippedGoodsVO.setAirUnshippedGoodsList(airUnshippedGoodsList);
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 根据正单号获得流水号
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-11 下午2:52:41
	 */
	@JSON
	public String querySerialNo(){
		//异常处理
		try{
			//空运运单流水号实体
			List<AirWaybillSerialNoEntity> airWaybillSerialNoList = airUnshippedGoodsService.querySerialNoByWaybillNo(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//进行设置
			airUnshippedGoodsVO.setAirWaybillSerialNoList(airWaybillSerialNoList);
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 根据正单号或运单号获取拉货信息
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-11 下午8:03:04
	 */
	@JSON
	public String queryUnshippedGoodsByBillNo(){
		//查询拉货信息
		//异常处理
		try{
			//拉货实体
			AirUnshippedGoodsEntity airUnshippedGoodsEntity = airUnshippedGoodsService.queryUnshippedGoodsByBillNo(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//设置
			airUnshippedGoodsVO.setAirUnshippedGoodsEntity(airUnshippedGoodsEntity);
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 录入或修改拉货信息
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-12 下午4:42:39
	 */
	@JSON
	public String saveOrUpdateAirUnshippedGoods(){
		//保存更新拉货
		//异常处理
		try{
			//注入拉货service
			airUnshippedGoodsService.saveOrUpdateAirUnshippedGoods(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//返回错误信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 拉货入库
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-14 下午3:13:21
	 */
	@JSON
	public String unshippedGoodsInStock(){
		//拉货入库
		try{
			//拉货入库注入拉货service
			airUnshippedGoodsService.unshippedGoodsInStock(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 删除拉货
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-17 下午3:44:02
	 */
	@JSON
	public String deleteAirUnshippedGoods(){
		//删除拉货信息
		try{
			//删除拉货注入service
			airUnshippedGoodsService.deleteAirUnshippedGoods(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	/**
	 * 根据ID查找拉货信息
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-19 9:57:19
	 */
	@JSON
	public String queryAirUnshippedGoodsById(){
		//id查询拉货信息
		//异常处理
		try{
			//空运拉货实体
			AirUnshippedGoodsEntity airUnshippedGoodsEntity = airUnshippedGoodsService.queryAirUnshippedGoodsById(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//vo设置
			airUnshippedGoodsVO.setAirUnshippedGoodsEntity(airUnshippedGoodsEntity);
			//返回成功信息
			return returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(), e);
			//返回错误信息
			return returnError(e);
		}
	}

	/**
	 * 起草拉货通知
	 * @author foss-liuxue(for IBM)
	 * @date 2012-12-27 下午2:25:21
	 */
	@JSON
	public String addUnshippedMessage(){
		//起草拉货通知
		//异常处理
		try{
			//增加到service
			airUnshippedGoodsService.addUnshippedMessage(airUnshippedGoodsVO.getAirUnshippedGoodsDto());
			//返回成功信息
			return  returnSuccess();
		}catch(BusinessException e){
			//抛出异常
			//写入日志
			LOGGER.error(e.getMessage(),e);
			//返回错误信息
			return returnError(e);
		}
	}
	
	
}