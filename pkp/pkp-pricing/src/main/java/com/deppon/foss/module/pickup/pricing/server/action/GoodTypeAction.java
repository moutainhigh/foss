/**
 *  initial comments.
 *  
 *  SR1	页面红色符号“*” 元素都为必填项。
 *  
 *  SR2	提交前系统校验“货物类型名称”如已存在则提示“货物类型已存在！
 *  
 *  	”系统提交失败。其中校验忽略大小写及左右空格。
 *  SR3	提交前系统校验“类型代码”如已存在则提示“类型代码已存在！”系统提交失败。其中校验忽略大小写及左右空格。
 *  
 *  SR4	类型代码生成规则： 参照产品定义中的生成规则，也是由管理员按照协商规则来录入暂规则定位: H+5个数字如：H00001
 *  
 *  SR5	提交货物类型时可选择是否激活来确定该货物类型是否立即可使用，若没有在新增时做激活操作后续在货物类型列表中也可针对未
 *  	做激活的货物类型记录做激活操作。
 *  
 *  SR6	在录入完货物类型信息前台根据所录入的货物编号与名称安全通过校验后，检查是否选择了立即激活,
 *  做激活的货物类型会和去所有已激活的产品进行自动绑定生成条目信息。生成的条目信息如下：产品编号，货物编号，条目名称=产品名称（货物名称），条目编号=由大写字母T+五位数字组成，如：T00001记录每增一条自增1。
 *
 *   *  SR1	页面红色符号“*” 元素都为必填项。
 *  
 *  SR2	提交前系统校验“货物类型名称”如已存在则提示“货物类型已存在！
 *  
 *  	”系统提交失败。其中校验忽略大小写及左右空格。
 *  SR3	提交前系统校验“类型代码”如已存在则提示“类型代码已存在！”系统提交失败。其中校验忽略大小写及左右空格。
 *  
 *  SR4	类型代码生成规则： 参照产品定义中的生成规则，也是由管理员按照协商规则来录入暂规则定位: H+5个数字如：H00001
 *  
 *  SR5	提交货物类型时可选择是否激活来确定该货物类型是否立即可使用，若没有在新增时做激活操作后续在货物类型列表中也可针对未
 *  	做激活的货物类型记录做激活操作。
 *  
 *  SR6	在录入完货物类型信息前台根据所录入的货物编号与名称安全通过校验后，检查是否选择了立即激活,
 *  做激活的货物类型会和去所有已激活的产品进行自动绑定生成条目信息。生成的条目信息如下：产品编号，货物编号，条目名称=产品名称（货物名称），条目编号=由大写字母T+五位数字组成，如：T00001记录每增一条自增1。
 * *  SR1	页面红色符号“*” 元素都为必填项。
 *  
 *  SR2	提交前系统校验“货物类型名称”如已存在则提示“货物类型已存在！
 *  
 *  	”系统提交失败。其中校验忽略大小写及左右空格。
 *  SR3	提交前系统校验“类型代码”如已存在则提示“类型代码已存在！”系统提交失败。其中校验忽略大小写及左右空格。
 *  
 *  SR4	类型代码生成规则： 参照产品定义中的生成规则，也是由管理员按照协商规则来录入暂规则定位: H+5个数字如：H00001
 *  
 *  SR5	提交货物类型时可选择是否激活来确定该货物类型是否立即可使用，若没有在新增时做激活操作后续在货物类型列表中也可针对未
 *  	做激活的货物类型记录做激活操作。
 *  
 *  SR6	在录入完货物类型信息前台根据所录入的货物编号与名称安全通过校验后，检查是否选择了立即激活,
 *  做激活的货物类型会和去所有已激活的产品进行自动绑定生成条目信息。生成的条目信息如下：产品编号，货物编号，条目名称=产品名称（货物名称），条目编号=由大写字母T+五位数字组成，如：T00001记录每增一条自增1。
 * *  SR1	页面红色符号“*” 元素都为必填项。
 *  
 *  SR2	提交前系统校验“货物类型名称”如已存在则提示“货物类型已存在！
 *  
 *  	”系统提交失败。其中校验忽略大小写及左右空格。
 *  SR3	提交前系统校验“类型代码”如已存在则提示“类型代码已存在！”系统提交失败。其中校验忽略大小写及左右空格。
 *  
 *  SR4	类型代码生成规则： 参照产品定义中的生成规则，也是由管理员按照协商规则来录入暂规则定位: H+5个数字如：H00001
 *  
 *  SR5	提交货物类型时可选择是否激活来确定该货物类型是否立即可使用，若没有在新增时做激活操作后续在货物类型列表中也可针对未
 *  	做激活的货物类型记录做激活操作。
 *  
 *  SR6	在录入完货物类型信息前台根据所录入的货物编号与名称安全通过校验后，检查是否选择了立即激活,
 *  做激活的货物类型会和去所有已激活的产品进行自动绑定生成条目信息。生成的条目信息如下：产品编号，货物编号，条目名称=产品名称（货物名称），条目编号=由大写字母T+五位数字组成，如：T00001记录每增一条自增1。
 * *  SR1	页面红色符号“*” 元素都为必填项。
 *  
 *  SR2	提交前系统校验“货物类型名称”如已存在则提示“货物类型已存在！
 *  
 *  	”系统提交失败。其中校验忽略大小写及左右空格。
 *  SR3	提交前系统校验“类型代码”如已存在则提示“类型代码已存在！”系统提交失败。其中校验忽略大小写及左右空格。
 *  
 *  SR4	类型代码生成规则： 参照产品定义中的生成规则，也是由管理员按照协商规则来录入暂规则定位: H+5个数字如：H00001
 *  
 *  SR5	提交货物类型时可选择是否激活来确定该货物类型是否立即可使用，若没有在新增时做激活操作后续在货物类型列表中也可针对未
 *  	做激活的货物类型记录做激活操作。
 *  
 *  SR6	在录入完货物类型信息前台根据所录入的货物编号与名称安全通过校验后，检查是否选择了立即激活,
 *  做激活的货物类型会和去所有已激活的产品进行自动绑定生成条目信息。生成的条目信息如下：产品编号，货物编号，条目名称=产品名称（货物名称），条目编号=由大写字母T+五位数字组成，如：T00001记录每增一条自增1。
 *
 */
/*******************************************************************************
 * Copyright 2013 BSE TEAM
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *    http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 * PROJECT NAME	: pkp-pricing
 * 
 * FILE PATH        	: src/main/java/com/deppon/foss/module/pickup/pricing/server/action/GoodTypeAction.java
 * 
 * FILE NAME        	: GoodTypeAction.java
 * 
 * AUTHOR			: FOSS综合管理开发组
 * 
 * HOME PAGE		:  http://www.deppon.com
 * 
 * COPYRIGHT		: Copyright (c) 2013  Deppon All Rights Reserved.
 ******************************************************************************/
package com.deppon.foss.module.pickup.pricing.server.action;

import java.util.Date;
import java.util.List;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.deppon.foss.framework.exception.BusinessException;
import com.deppon.foss.framework.server.web.action.AbstractAction;
import com.deppon.foss.framework.server.web.result.json.annotation.JSON;
import com.deppon.foss.module.pickup.pricing.api.server.service.IGoodsTypeService;
import com.deppon.foss.module.pickup.pricing.api.shared.domain.GoodsTypeEntity;
import com.deppon.foss.module.pickup.pricing.api.shared.exception.MessageType;
import com.deppon.foss.module.pickup.pricing.api.shared.vo.GoodVo;
import com.deppon.foss.util.define.FossConstants;
/**
 * 货物类型ACTION
 * 
 * @author 张斌
 * 
 * @date 2012-12-18
 * 
 * @version 1.0
 */
public class GoodTypeAction extends AbstractAction {
    	/**
    	 *
    	 * 序列化
    	 *
    	 */
	private static final long serialVersionUID = 2883644272419312426L;
	/**
	 * 
	 * 日志处理
	 *
	 */
	private static final Logger LOGGER = LoggerFactory.getLogger(AirPricePlanAction.class);
	/**
	 * 
	 * 货物类别VO
	 * 
	 */
	private GoodVo goodVo = new GoodVo();
	/**
	 * 
	 * <p>获得货物类别VO</p> 
	 * @author DP-Foss-YueHongJie
	 * @date 2013-3-17 上午10:43:42
	 * @return
	 * @see
	 */
	public GoodVo getGoodVo() {
	    return goodVo;
	}
	/**
	 * 
	 * <p>设置货物类别VO</p> 
	 * @author DP-Foss-YueHongJie
	 * @date 2013-3-17 上午10:43:56
	 * @param goodVo
	 * @see
	 */
	public void setGoodVo(GoodVo goodVo) {
	    this.goodVo = goodVo;
	}
	/**
	 *
	 * 货物类别服务
	 *
	 */
	private IGoodsTypeService goodsTypeService;
	/**
	 * 
	 * <p>注入货物类别服务</p> 
	 * 
	 * @author DP-Foss-YueHongJie
	 * 
	 * @date 2013-3-17 上午10:44:24
	 * 
	 * @param goodsTypeService
	 * 
	 * @see
	 */
	public void setGoodsTypeService(IGoodsTypeService goodsTypeService) {
		this.goodsTypeService = goodsTypeService;
	}
	/**
	 * .
	 * <p>
	 * 根据条件查询货物类型<br/>
	 * 
	 * 方法名：searchGoodsTypeByCondition
	 * 
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 */
	@JSON
	public String searchGoodsTypeByCondition() {
		try {
			List<GoodsTypeEntity> goodsTypeEntityList = goodsTypeService.findGoodsTypePagingByCondition(goodVo.getGoodsTypeEntity(), start, limit);//根据条件查询
			goodVo.setGoodsTypeEntityList(goodsTypeEntityList);
			this.setTotalCount(goodsTypeService.countGoodsTypePagingByCondition(goodVo.getGoodsTypeEntity()));//查询总个数
			return returnSuccess();
		} catch (BusinessException e) {
		    	LOGGER.error("根据条件查询货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 查询所有有效货物类型<br/>
	 * 
	 * 方法名：queryAllGoodsType
	 * 
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 */
	@JSON
	public String queryAllGoodsType() {
		try {
			GoodsTypeEntity goodsTypeEntity = new GoodsTypeEntity();
			goodsTypeEntity.setActive(FossConstants.ACTIVE);
			goodsTypeEntity.setBillDate(new Date());
            List<GoodsTypeEntity> goodsTypeEntityList = goodsTypeService.findGoodsTypeByCondiction(goodsTypeEntity);
            goodVo.setGoodsTypeEntityList(goodsTypeEntityList);
			return returnSuccess();
		} catch (BusinessException e) {
		    	LOGGER.error("查询所有有效货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 批量激活货物类型<br/>
	 * 方法名：activationGoodsType
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 * 
	 */
	@JSON
	public String activationGoodsType() {
		try {
			goodsTypeService.activationGoodsType(goodVo.getGoodIds());
			return returnSuccess(MessageType.ACTIVE_GOODSTYPE_SUCCESS);
		} catch (BusinessException e) {
		    	LOGGER.error("批量激活货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 新增货物类型<br/>
	 * 方法名：addGoodsType
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 * 
	 */
	@JSON
	public String addGoodsType() {
		try {
			goodsTypeService.addGoodsType(goodVo.getGoodsTypeEntity());
			return returnSuccess(MessageType.SAVE_GOODSTYPE_SUCCESS);
		} catch (BusinessException e) {
		    	LOGGER.error("新增货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 修改货物类型<br/>
	 * 方法名：updateGoodsType
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 */
	@JSON
	public String updateGoodsType() {
		try {
			goodsTypeService.updateGoodsType(goodVo.getGoodsTypeEntity());
			return returnSuccess(MessageType.UPDATE_GOODSTYPE_SUCCESS);
		} catch (BusinessException e) {
		    	LOGGER.error("修改货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 批量删除货物类型<br/>
	 * 方法名：deleteGoodsType
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 * 
	 */
	@JSON
	public String deleteGoodsType() {
		try {
			return returnSuccess(MessageType.DELETE_GOODSTYPE_SUCCESS);
		} catch (BusinessException e) {
		    	LOGGER.error("批量删除货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
	/**
	 * .
	 * <p>
	 * 根据ID查询货物类型<br/>
	 * 方法名：findGoodsTypeById
	 * </p>
	 * 
	 * @author 078838-张斌
	 * 
	 * @时间 2012-12-18
	 * 
	 * @since JDK1.6
	 */
	@JSON
	public String findGoodsTypeById() {
		try {
			GoodsTypeEntity goodsTypeEntity = goodsTypeService.findGoodsTypeById(goodVo.getGoodsTypeEntity().getId());
			goodVo.setGoodsTypeEntity(goodsTypeEntity);
			return returnSuccess();
		} catch (BusinessException e) {
		    	LOGGER.error("根据ID查询货物类型: "+e.getMessage());
			return returnError(e);
		}
	}
}